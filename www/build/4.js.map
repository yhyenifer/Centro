{"version":3,"sources":["../../src/pages/home-cliente/home-cliente.module.ts","../../src/pages/home-cliente/home-cliente.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;AAAyC;AACO;AACC;AAUjD,IAAa,qBAAqB;IAAlC;IAAoC,CAAC;IAAD,4BAAC;AAAD,CAAC;AAAxB,qBAAqB;IARjC,uEAAQ,CAAC;QACR,YAAY,EAAE;YACZ,sEAAe;SAChB;QACD,OAAO,EAAE;YACP,sEAAe,CAAC,QAAQ,CAAC,sEAAe,CAAC;SAC1C;KACF,CAAC;GACW,qBAAqB,CAAG;AAAH;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACZQ;AAC2D;AAClB;AAEvB;AAC5B;AAGhC;;;;;GAKG;AAOH,IAAa,eAAe;IA8B1B,yBAAoB,MAAc,EACzB,OAAsB,EACtB,SAAoB,EACnB,QAA6B,EACrC,SAA0B,EACnB,IAAoB;QAL7B,iBAmBC;QAnBmB,WAAM,GAAN,MAAM,CAAQ;QACzB,YAAO,GAAP,OAAO,CAAe;QACtB,cAAS,GAAT,SAAS,CAAW;QACnB,aAAQ,GAAR,QAAQ,CAAqB;QAE9B,SAAI,GAAJ,IAAI,CAAgB;QAjC7B,cAAS,GAAG,gDAAQ,CAAC,QAAQ,EAAE,CAAC,GAAG,CAAC,aAAa,CAAC,CAAC;QACnD,YAAO,GAAG,gDAAQ,CAAC,QAAQ,EAAE,CAAC,GAAG,CAAC,WAAW,CAAC,CAAC;QAO/C,aAAQ,GAAkB;YACxB,OAAO,EAAE,EAAE;YACX,eAAe,EAAE,IAAI,CAAC,MAAM,CAAC,eAAe,CAAC,QAAQ;YACrD,YAAY,EAAE,IAAI,CAAC,MAAM,CAAC,YAAY,CAAC,IAAI;YAC3C,SAAS,EAAE,IAAI,CAAC,MAAM,CAAC,SAAS,CAAC,OAAO;YACxC,UAAU,EAAE,CAAC;SACd;QACD,aAAQ,GAAkB;YACxB,OAAO,EAAE,EAAE;YACX,eAAe,EAAE,IAAI,CAAC,MAAM,CAAC,eAAe,CAAC,QAAQ;YACrD,YAAY,EAAE,IAAI,CAAC,MAAM,CAAC,YAAY,CAAC,IAAI;YAC3C,SAAS,EAAE,IAAI,CAAC,MAAM,CAAC,SAAS,CAAC,OAAO;YACxC,UAAU,EAAE,CAAC;SACd;QAID,YAAO,GAAG,EAAa,CAAC;QAYtB,IAAI,CAAC,WAAW,EAAE,CAAC;QACnB,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;QAClD,IAAI,CAAC,SAAS,GAAG,SAAS,CAAC;QAC3B,IAAI,CAAC,GAAG,GAAG,SAAS,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC;QAEhC,IAAI,CAAC,UAAU,EAAE,CAAC,IAAI,CAAC,UAAC,KAAK;YACxB,KAAI,CAAC,UAAU,CAAC,KAAK,CAAC,CAAC;QACzB,CAAC,CAAC;IAGP,CAAC;IAID,qCAAW,GAAX;QACE,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,IAAI,EAAE,OAAO,CAAC,CAAC;QAChC,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,KAAK,EAAE,OAAO,CAAC,CAAC;IACnC,CAAC;IACM,mCAAS,GAAf;;;;gBAEG,IAAG,CAAC;oBAEF,IAAI,CAAC,MAAM,CAAC,UAAU,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,IAAI,CAAC,UAAC,SAAS;wBACnD,KAAI,CAAC,WAAW,GAAG,yBAAyB,GAAG,SAAS,CAAC;wBACzD,KAAI,CAAC,OAAO,CAAC,OAAO,CAAC,kBAAkB,EAAC;4BACtC,WAAW,EAAE,KAAI,CAAC,WAAW;4BAC7B,GAAG,EAAE,KAAI,CAAC,GAAG;yBACd,CAAC,CAAC;oBACL,CAAC,EAAE,UAAC,GAAG;oBACP,CAAC,CAAC,CAAC;gBACL,CAAC;gBACD,KAAK,EAAC,CAAC,CAAC,EAAC;gBACT,CAAC;;;;KACJ;IAEK,mCAAS,GAAf;;;;gBACE,IAAG,CAAC;oBACF,+BAA+B;oBAE/B,IAAI,CAAC,MAAM,CAAC,UAAU,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,IAAI,CAAC,UAAC,SAAS;wBACnD,KAAI,CAAC,WAAW,GAAG,yBAAyB,GAAG,SAAS,CAAC;wBACzD,KAAI,CAAC,OAAO,CAAC,OAAO,CAAC,kBAAkB,EAAC;4BACtC,WAAW,EAAE,KAAI,CAAC,WAAW;4BAC7B,GAAG,EAAE,KAAI,CAAC,GAAG;yBACd,CAAC,CAAC;oBACL,CAAC,EAAE,UAAC,GAAG;oBAEP,CAAC,CAAC,CAAC;gBAEL,CAAC;gBACD,KAAK,EAAC,CAAC,CAAC,EAAC;gBAET,CAAC;;;;KACJ;IAGC,gCAAM,GAAN;QACE,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,kBAAkB,EAAC;YACnC,WAAW,EAAE,IAAI,CAAC,WAAW;YAC7B,GAAG,EAAE,IAAI,CAAC,GAAG;YACb,MAAM,EAAE,IAAI,CAAC,MAAM;SACpB,CAAC,CAAC;IAEL,CAAC;IAID,wCAAc,GAAd;QACE,IAAI,CAAC,GAAG,GAAG,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC;QACrC,IAAI,CAAC,MAAM,GAAE,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC;QAC1C,IAAI,CAAC,KAAK,GAAE,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC;QACxC,IAAI,CAAC,MAAM,GAAE,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC;QAC1C,kEAAkE;QAClE,uCAAuC;QACvC,SAAS,CAAC,cAAc,CAAC,UAAS,IAAI;YAClC,EAAE,EAAC,IAAI,CAAC,SAAS,CAAC,EAAC;gBAChB,kEAAkE;gBAClE,KAAK,CAAE,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,CAAE,CAAC;YAChC,CAAC;YAAA,IAAI,EAAC;gBACJ,+EAA+E;gBAC/E,KAAK,CAAE,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,CAAE,CAAC;YAChC,CAAC;QACD,CAAC,CAAC,CAAC;QAEL,SAAS,CAAC,cAAc,CAAC,UAAS,KAAK;YACnC,KAAK,CAAE,KAAK,CAAE,CAAC;QACnB,CAAC,CAAC,CAAC;IACR,CAAC;IAED,4BAAE,GAAF;QAEE,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,kBAAkB,CAAC,CAAC;IAC3C,CAAC;IACD,oCAAU,GAAV;QACG,IAAI,OAAO,GAAG,IAAI,OAAO,CAAC,UAAC,OAAO,EAAE,MAAM;YACxC,SAAS,CAAC,QAAQ,CAAC,UAAS,KAAK;gBAC/B,KAAK,CAAC,KAAK,CAAC;gBAChB,OAAO,CAAC,KAAK,CAAC,CAAC;YACb,CAAC,EAAE,UAAC,GAAG;gBACL,MAAM,CAAC,GAAG,CAAC,CAAC;YACpB,CAAC,CAAC,CAAC;QACC,CAAC,CAAC;QACF,MAAM,CAAC,OAAO,CAAC;IACjB,CAAC;IAED,oCAAU,GAAV,UAAW,CAAC;QACV,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,IAAI,CAAC;YACtC,GAAG,EAAE,gDAAQ,CAAC,IAAI,EAAE,CAAC,WAAW,CAAC,GAAG;YACpC,QAAQ,EAAE,CAAC;SAEZ,CAAC,CAAC,IAAI,CAAC;YACN,KAAK,CAAC,cAAc,CAAC,CAAC;QACtB,CAAC,CAAC,CAAC,KAAK,CAAC;YACP,KAAK,CAAC,kBAAkB,CAAC,CAAC;QAC5B,CAAC,CAAC;QAEJ,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,IAAI,CAAC;YACpC,UAAU,EAAE,OAAO;YACnB,OAAO,EAAE,OAAO;SACjB,CAAC,CAAC,IAAI,CAAC;YACN,KAAK,CAAC,gBAAgB,CAAC,CAAC;QACxB,CAAC,CAAC,CAAC,KAAK,CAAC;YACP,KAAK,CAAC,oBAAoB,CAAC,CAAC;QAClC,CAAC,CAAC;IACJ,CAAC;IAEF,sBAAC;AAAD,CAAC;AArKY,eAAe;IAL3B,wEAAS,EAAE;IACX,wEAAS,CAAC;QACT,QAAQ,EAAE,mBAAmB;OACG;KACjC,CAAC;6EA+BkC;QAChB,iEAAa;QACX,kFAAS;QACT,uEAAmB;QAC1B,sEAAe;QACb,YAAc;AAkI9B;SArKY,eAAe,gB","file":"4.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { IonicPageModule } from 'ionic-angular';\r\nimport { HomeClientePage } from './home-cliente';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    HomeClientePage,\r\n  ],\r\n  imports: [\r\n    IonicPageModule.forChild(HomeClientePage),\r\n  ],\r\n})\r\nexport class HomeClientePageModule {}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/home-cliente/home-cliente.module.ts","import { Component } from '@angular/core';\r\nimport { AlertController, IonicPage, MenuController, NavController, NavParams } from 'ionic-angular';\r\nimport { AngularFireDatabase, FirebaseListObservable } from 'angularfire2/database'\r\nimport { Factura } from '../../app/models/factura';\r\nimport { Camera, CameraOptions } from '@ionic-native/camera'\r\nimport firebase from 'firebase';\r\ndeclare var FCMPlugin;\r\n\r\n/**\r\n * Generated class for the HomeClientePage page.\r\n *\r\n * See http://ionicframework.com/docs/components/#navigation for more info\r\n * on Ionic pages and navigation.\r\n */\r\n\r\n@IonicPage()\r\n@Component({\r\n  selector: 'page-home-cliente',\r\n  templateUrl: 'home-cliente.html',\r\n})\r\nexport class HomeClientePage {\r\n \r\n  firestore = firebase.database().ref('/pushtokens');\r\n  firemsg = firebase.database().ref('/messages');\r\n\r\n  public uid;\r\n  public nombre;\r\n  public email;\r\n  public puntos;\r\n\r\n  options1: CameraOptions = {\r\n    quality: 25,\r\n    destinationType: this.camera.DestinationType.DATA_URL,\r\n    encodingType: this.camera.EncodingType.JPEG,\r\n    mediaType: this.camera.MediaType.PICTURE,\r\n    sourceType: 1\r\n  }\r\n  options2: CameraOptions = {\r\n    quality: 25,\r\n    destinationType: this.camera.DestinationType.DATA_URL,\r\n    encodingType: this.camera.EncodingType.JPEG,\r\n    mediaType: this.camera.MediaType.PICTURE,\r\n    sourceType: 0\r\n  }\r\n  alertCtrl: AlertController;\r\n  public photos : any;\r\n  public base64Image : string;\r\n  factura = {} as Factura;\r\n  infoFactura$: FirebaseListObservable<Factura[]>\r\n\r\n  constructor(private camera: Camera, \r\n    public navCtrl: NavController, \r\n    public navParams: NavParams,\r\n    private database: AngularFireDatabase, \r\n    alertCtrl: AlertController,\r\n    public menu: MenuController\r\n\r\n  )\r\n     {\r\n    this.menu1Active();\r\n    this.infoFactura$ = this.database.list('factura');\r\n    this.alertCtrl = alertCtrl;\r\n    this.uid = navParams.get(\"uid\");\r\n\r\n    this.tokensetup().then((token) => {\r\n         this.storetoken(token);\r\n       })\r\n\r\n\r\n  }\r\n \r\n  \r\n\r\n  menu1Active() {\r\n    this.menu.enable(true, 'menu1');\r\n    this.menu.enable(false, 'menu2');\r\n  }\r\n   async tomarFoto(): Promise<any>{\r\n    \r\n      try{\r\n        \r\n        this.camera.getPicture(this.options1).then((ImageData) => {\r\n          this.base64Image = 'data:image/jpeg;base64,' + ImageData;\r\n          this.navCtrl.setRoot('SubirFacturaPage',{\r\n            base64Image: this.base64Image,\r\n            uid: this.uid\r\n          });\r\n        }, (err) => {\r\n        });\r\n      }\r\n      catch(e){\r\n      }\r\n  }\r\n\r\n  async sacarFoto(): Promise<any>{\r\n    try{\r\n      //this.uid = 'asfdfhsfhgjsfhj';\r\n  \r\n      this.camera.getPicture(this.options2).then((ImageData) => {\r\n        this.base64Image = 'data:image/jpeg;base64,' + ImageData;\r\n        this.navCtrl.setRoot('SubirFacturaPage',{\r\n          base64Image: this.base64Image,\r\n          uid: this.uid\r\n        });\r\n      }, (err) => {\r\n        \r\n      });\r\n\r\n    }\r\n    catch(e){\r\n\r\n    }\r\n}\r\n\r\n\r\n  upload() {\r\n    this.navCtrl.push('SubirFacturaPage',{\r\n      base64Image: this.base64Image,\r\n      uid: this.uid,\r\n      nombre: this.nombre\r\n    });\r\n\r\n  }\r\n\r\n\r\n \r\n  ionViewDidLoad() {\r\n    this.uid = this.navParams.get(\"uid\");\r\n    this.nombre =this.navParams.get(\"nombre\");\r\n    this.email =this.navParams.get(\"email\");\r\n    this.puntos =this.navParams.get(\"puntos\");\r\n    // console.log('nombre: ' + this.nombre + ' email: '+this.puntos);\r\n    // console.log('email: ' + this.email);\r\n    FCMPlugin.onNotification(function(data){\r\n        if(data.wasTapped){\r\n           //Notification was received on device tray and tapped by the user.\r\n           alert( JSON.stringify(data) );\r\n         }else{\r\n           //Notification was received in foreground. Maybe the user needs to be notified.\r\n           alert( JSON.stringify(data) );\r\n         }\r\n         });\r\n    \r\n       FCMPlugin.onTokenRefresh(function(token){\r\n           alert( token );\r\n       });    \r\n  }\r\n\r\n  ir(){\r\n    \r\n    this.navCtrl.setRoot('SubirFacturaPage');\r\n  }\r\n  tokensetup() {\r\n     var promise = new Promise((resolve, reject) => {\r\n       FCMPlugin.getToken(function(token){\r\n         alert(token)\r\n     resolve(token);\r\n       }, (err) => {\r\n         reject(err);\r\n });\r\n     })\r\n     return promise;\r\n   }\r\n\r\n   storetoken(t) {\r\n     this.database.list(this.firestore).push({\r\n       uid: firebase.auth().currentUser.uid,\r\n       devtoken: t\r\n        \r\n     }).then(() => {\r\n       alert('Token stored');\r\n       }).catch(() => {\r\n         alert('Token not stored');\r\n       })\r\n\r\n     this.database.list(this.firemsg).push({\r\n       sendername: 'mauro',//firebase.auth().currentUser.displayName,\r\n       message: 'hello'\r\n     }).then(() => {\r\n       alert('Message stored');\r\n       }).catch(() => {\r\n         alert('Message not stored');\r\n   })  \r\n }\r\n\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/pages/home-cliente/home-cliente.ts"],"sourceRoot":""}