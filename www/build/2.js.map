{"version":3,"sources":["../../src/pages/premios/premios.module.ts","../../src/pages/premios/premios.ts"],"names":[],"mappings":"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","file":"2.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { PremiosPage } from './premios';\n\n@NgModule({\n  declarations: [\n    PremiosPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(PremiosPage),\n  ],\n})\nexport class PremiosPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/premios/premios.module.ts","import { FirebaseListObservable, AngularFireDatabase } from 'angularfire2/database';\nimport { Component } from '@angular/core';\nimport { AlertController, IonicPage, MenuController, NavController, NavParams } from 'ionic-angular';\nimport { Storage } from '@ionic/storage';\nimport { Premio } from '../../app/models/premio';\nimport firebase from 'firebase';\n\n/**\n * Generated class for the PremiosPage page.\n *\n * See https://ionicframework.com/docs/components/#navigation for more info on\n * Ionic pages and navigation.\n */\n\n@IonicPage()\n@Component({\n  selector: 'page-premios',\n  templateUrl: 'premios.html',\n})\nexport class PremiosPage {\n  premios: any[];\n  imagenes: string[];\n  premios$: FirebaseListObservable<Premio[]>;\n  premio = {} as Premio;\n  puntosCliente: number =0;\n  diferencia: number =0;\n  nombre : string; //nombre del usuario autenticado\n  constructor(public navCtrl: NavController, public navParams: NavParams,\n    public menu: MenuController,\n    public alertCtrl : AlertController,\n    private database: AngularFireDatabase,\n    public storage: Storage) {\n      this.menu1Active();\n      this.premios$ = this.database.list('premio');\n      this.premios = [];\n      this.database.list('premio').subscribe(data => {\n\n        this.premios = data;\n        // console.log(this.premios);\n        this.imagenes = Array(this.premios.length);\n        for (var index = 0; index < this.premios.length; index++) {\n          \n          \n          this.imagenes[index] = `img/premios/`+this.premios[index].nombre+`/`+this.premios[index].url;\n          this.generarFotos(index);\n  \n        }\n      });\n  }\n\n  ionViewDidLoad() {\n    this.storage.get('nombre').then((data)=>{\n      this.nombre=data;\n     });\n     this.storage.get('puntos').then((data)=>{\n      this.puntosCliente=data;\n     });\n    \n    this.premios$ = this.database.list('premio');\n    this.premios = [];\n    this.database.list('premio').subscribe(data => {\n\n      this.premios = data;\n      this.imagenes = Array(this.premios.length);\n      for (var index = 0; index < this.premios.length; index++) {\n        this.imagenes[index] = `img/premios/`+this.premios[index].nombre+`/`+this.premios[index].url;\n        this.generarFotos(index);\n\n      }\n    });\n    \n  }\n  menu1Active() {\n    this.menu.enable(true, 'menu1');\n    this.menu.enable(false, 'menu2');\n  }\n\n  generarFotos(index){\n    \n    //for (var index = 0; index < this.almacen.url.length; index++) {\n      let storageRef = firebase.storage().ref();\n      let imageRef = storageRef.child(this.imagenes[index]);\n      imageRef.getDownloadURL().then(url =>{\n        this.imagenes[index] = url;\n        // console.log(\"contador\"+this.imagenes[index]);\n      });\n        \n  \n  }\n//validar que el cliente si tenga los puntos requeridos y validar que el premio si tenga cantidad dispobible\n  validarDatos(){\n    return true;\n  }\n  canjear(premio,premio_key){\n    if(this.validarDatos()==true){\n      let alert = this.alertCtrl.create({\n        title: 'Confirmación',\n        subTitle: \"¿\"+ this.nombre +\" está seguro de Canjear éste Premio?\",\n        buttons:[\n          {\n            text: 'Si',\n            role: 'si',\n            handler: () => {\n              // console.log('si');\n             //aqui va el codigo de canjear\n              \n             \n                //notificacion de accion realizada\n                let alert = this.alertCtrl.create({\n                  title: 'Notifiación',\n                  subTitle: \"Se ha canjeado exitosamente el Premio\",\n                  buttons: [{\n                    text: 'Aceptar',\n                    role: 'Aceptar',\n                    handler: () => {\n                      this.navCtrl.setRoot(\"PremiosPage\");\n                  \n                    } \n                  }\n                  ]\n                });\n                alert.present();\n                   }\n\n       } \n       ,\n       {\n         text: 'No',\n         role: 'no',\n         handler: () => {\n           \n         }\n       }]\n       });\n       alert.present();\n}}\n  \n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/premios/premios.ts"],"sourceRoot":""}